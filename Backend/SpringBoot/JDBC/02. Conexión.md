Para lograr la conexión a nuestro servidor debemos instalar el *driver* oficial del gestor de bases de datos que estemos utilizando ya que JDBC lo único que hace es crear un abstracción sobre estos para que nuestra experiencia de desarrollo sea similar en todos loss gestores.

Para instalar el *driver* oficial se recomienda utilizar un empaquetador como Maven o Gradle.

```
// MySQL
<dependency>
    <groupId>mysql</groupId>
    <artifactId>mysql-connector-java</artifactId>
    <version>8.0.33</version>
</dependency>

// PostgreSQL
<dependency>
	<groupId>org.postgresql</groupId>
	<artifactId>postgresql</artifactId>
	<version>42.7.3</version>
</dependency>

// Oracle
<dependency>
	<groupId>com.oracle.database.jdbc</groupId>
	<artifactId>ojdbc11</artifactId>
	<version>23.2.0.0</version>
</dependency>

// SQL Server
<dependency>
	<groupId>com.microsoft.sqlserver</groupId>
	<artifactId>mssql-jdbc</artifactId>
	<version>12.6.1.jre11</version>
</dependency>

// SQLite
<dependency>
	<groupId>org.xerial</groupId>
	<artifactId>sqlite-jdbc</artifactId>
	<version>3.44.1.0</version>
</dependency>
```
## Cadenas de conexión

| Motor      | Ejemplo                                                 |
| ---------- | ------------------------------------------------------- |
| MySQL      | jdbc:mysql://localhost:3306/java_curso                  |
| PostgreSQL | jdbc:postgresql://localhost:5432/java_curso             |
| Oracle     | jdbc:oracle:thin@localhost:1521/java_curso              |
| SQL Server | jdbc:sqlserver://localhost:1433;databaseName=java_curso |
| SQLite     | jdbc:sqlite:java_curso.db                               |
### Crea una conexión

Para crear una nueva conexión a la base de datos debemos realizar lo siguiente:

```
String URL = 
	"jdbc:mysql://localhost:3306/java_curso?serverTimezone=America/Mexico_City";
String USERNAME = "root";  
String PASSWORD = "123456";

Connection connection = DriverManager.getConnection(URL, USERNAME, PASSWORD);
```

**Nota: El objeto *Connection* implementa la interfaz *AutoClosable* por lo que podemos utilizarlo en conjunto con un *try with resources*.**

Ademas del *Driver Manager* podemos iniciar una conexión a nuestra base de datos utilizando la API *Data Source* la cual nos ofrece soporte para *pool* de conexiones, configuración centralizada y mayor escalabilidad:

```
String URL = 
	"jdbc:mysql://localhost:3306/java_curso?serverTimezone=America/Mexico_City";
String USERNAME = "root";  
String PASSWORD = "123456";

DataSource dataSource = new MysqlDataSource();

// Utilizando un URL de conexion
dataSource.setUrl(URL);

// Indicando cada uno de los campos mediante los metodos setters
dataSource.setServerName("localhost");
dataSource.setPort(3306);
dataSource.setDatabaseName("java_curso");

Connection connection = dataSource.getConnection(USERNAME, PASSWORD);
```
### Pool de conexiones

Este enfoque es de gran utilidad en contextos donde nuestra aplicación es *multithread* y puede ser utilizada por varios usuarios a la vez. 

Nos permite tener un grupo de conexiones activas durante el ciclo de vida de nuestra aplicación, indicar un tamaño minino y un tamaño máximo (este solo lo alcanza cuando el *pool* inicial se ve sobrepasado). Mejora el rendimiento ya que el proceso de creación y cierre de conexiones es un proceso pesado que puede ralentizar nuestra aplicación unos cuantos milisegundos.

Si bien cada conexión sigue implementando la interfaz *AutoClosable*, en este caso las conexiones no son cerradas, en su lugar regresan al *pool* para que puedan ser reutilizadas más adelante. El *pool* también implementa dicha interfaz y es este el que al final del ciclo de vida de la aplicación cierre todas las conexiones y libere sus recursos.

Dependencia:

```
<dependency>
    <groupId>org.apache.commons</groupId>
    <artifactId>commons-dbcp2</artifactId>
    <version>2.8.0</version>
</dependency>
```

Crear un *pool* de conexiones:

```
String URL = 
	"jdbc:mysql://localhost:3306/java_curso?serverTimezone=America/Mexico_City";
String USERNAME = "root";  
String PASSWORD = "123456";

BasicDataSource pool = new BasicDataSource();

// Configuraciones de conexion
pool.setUrl(URL);
pool.setUsername(USERNAME);
pool.setPassword(PASSWORD);

// Configuraciones de pool
pool.setInitialSize(3);
pool.setMaxTotal(10);
```

Obtener una conexión del *pool*:

```
try (Connection conn = pool.getConnection()) { ... }
```